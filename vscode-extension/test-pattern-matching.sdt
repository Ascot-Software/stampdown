# Complete Pattern Test

This file tests that all patterns match correctly with proper scopes.

## 1. Block Helpers (should be meta.function.block.start.handlebars)

{{#if premium}}
{{#unless disabled}}
{{#each items}}
{{#with user}}
{{#customHelper arg1 arg2}}

## 2. End Blocks (should be meta.function.block.end.handlebars)

{{/if}}
{{/unless}}
{{/each}}
{{/with}}
{{/customHelper}}

## 3. Else Tokens (should be meta.function.inline.else.handlebars)

{{else}}
{{else if condition}}

## 4. Self-Closing Helpers (should be meta.function.block.self-closing.handlebars)

{{#uppercase name/}}
{{#lowercase email/}}
{{#add x y/}}
{{#multiply a b/}}
{{#formatDate date "YYYY-MM-DD"/}}

## 5. Complete Block Structure

{{#if premium}}
  Premium content
{{else if trial}}
  Trial content
{{else}}
  Free content
{{/if}}

{{#each users}}
  {{#if active}}
    Active: {{#uppercase name/}}
  {{else}}
    Inactive: {{name}}
  {{/if}}
{{/each}}

{{#with product}}
  Name: {{#capitalize title/}}
  Price: {{#formatCurrency price/}}
  {{#if available}}
    In stock
  {{else}}
    Out of stock
  {{/if}}
{{/with}}

## 6. Nested Self-Closing in Blocks

{{#each items}}
  Item {{@index}}: {{#uppercase this/}}
  {{#if (gt (length this) 10)}}
    Long name: {{#truncate this 10/}}
  {{else}}
    Short name: {{this}}
  {{/if}}
{{/each}}

## 7. Edge Cases

{{! Block helper with no args }}
{{#noArgs}}
  Content
{{/noArgs}}

{{! Self-closing with multiple args }}
{{#helper arg1 arg2 arg3 key="value" flag=true/}}

{{! Whitespace control }}
{{~#if premium~}}
  Trimmed
{{~else~}}
  Also trimmed
{{~/if~}}

{{! Self-closing with whitespace control }}
{{~#uppercase name~/}}
